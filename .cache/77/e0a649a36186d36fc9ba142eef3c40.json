{"id":"zB1J","dependencies":[{"name":"/home/ubuntu/dev/elu2/package.json","includedInParent":true,"mtime":1610121702865}],"generated":{"js":"AFRAME.registerComponent(\"ttl\",{schema:{seconds:{type:\"number\"}},init:function(){const t=new Date;t.setSeconds(t.getSeconds()+this.data.seconds),this.expireAt=t,this.tick=AFRAME.utils.throttleTick(this.tick,1e3,this)},update:function(t){if(t.seconds!==this.data.expireAt){const t=new Date;t.setSeconds(t.getSeconds()+this.data.seconds),this.expireAt=t}},tick:function(){new Date>this.expireAt&&this.el.parentNode.removeChild(this.el)}});"},"sourceMaps":{"js":{"mappings":[{"source":"components/ttl.js","name":"AFRAME","original":{"line":11,"column":0},"generated":{"line":1,"column":0}},{"source":"components/ttl.js","name":"registerComponent","original":{"line":11,"column":7},"generated":{"line":1,"column":7}},{"source":"components/ttl.js","original":{"line":11,"column":25},"generated":{"line":1,"column":25}},{"source":"components/ttl.js","original":{"line":11,"column":32},"generated":{"line":1,"column":31}},{"source":"components/ttl.js","name":"schema","original":{"line":12,"column":4},"generated":{"line":1,"column":32}},{"source":"components/ttl.js","original":{"line":12,"column":12},"generated":{"line":1,"column":39}},{"source":"components/ttl.js","name":"seconds","original":{"line":13,"column":8},"generated":{"line":1,"column":40}},{"source":"components/ttl.js","original":{"line":13,"column":17},"generated":{"line":1,"column":48}},{"source":"components/ttl.js","name":"type","original":{"line":13,"column":18},"generated":{"line":1,"column":49}},{"source":"components/ttl.js","original":{"line":13,"column":24},"generated":{"line":1,"column":54}},{"source":"components/ttl.js","name":"init","original":{"line":15,"column":4},"generated":{"line":1,"column":65}},{"source":"components/ttl.js","original":{"line":15,"column":10},"generated":{"line":1,"column":70}},{"source":"components/ttl.js","name":"now","original":{"line":16,"column":14},"generated":{"line":1,"column":81}},{"source":"components/ttl.js","name":"now","original":{"line":16,"column":14},"generated":{"line":1,"column":87}},{"source":"components/ttl.js","original":{"line":16,"column":20},"generated":{"line":1,"column":89}},{"source":"components/ttl.js","name":"Date","original":{"line":16,"column":24},"generated":{"line":1,"column":93}},{"source":"components/ttl.js","name":"now","original":{"line":17,"column":8},"generated":{"line":1,"column":98}},{"source":"components/ttl.js","name":"setSeconds","original":{"line":17,"column":12},"generated":{"line":1,"column":100}},{"source":"components/ttl.js","name":"now","original":{"line":17,"column":23},"generated":{"line":1,"column":111}},{"source":"components/ttl.js","name":"getSeconds","original":{"line":17,"column":27},"generated":{"line":1,"column":113}},{"source":"components/ttl.js","original":{"line":17,"column":42},"generated":{"line":1,"column":126}},{"source":"components/ttl.js","name":"data","original":{"line":17,"column":47},"generated":{"line":1,"column":131}},{"source":"components/ttl.js","name":"seconds","original":{"line":17,"column":52},"generated":{"line":1,"column":136}},{"source":"components/ttl.js","name":"expireAt","original":{"line":18,"column":13},"generated":{"line":1,"column":145}},{"source":"components/ttl.js","name":"expireAt","original":{"line":18,"column":13},"generated":{"line":1,"column":150}},{"source":"components/ttl.js","name":"now","original":{"line":18,"column":24},"generated":{"line":1,"column":159}},{"source":"components/ttl.js","name":"tick","original":{"line":19,"column":13},"generated":{"line":1,"column":161}},{"source":"components/ttl.js","name":"tick","original":{"line":19,"column":13},"generated":{"line":1,"column":166}},{"source":"components/ttl.js","name":"AFRAME","original":{"line":19,"column":20},"generated":{"line":1,"column":171}},{"source":"components/ttl.js","name":"utils","original":{"line":19,"column":27},"generated":{"line":1,"column":178}},{"source":"components/ttl.js","name":"throttleTick","original":{"line":19,"column":33},"generated":{"line":1,"column":184}},{"source":"components/ttl.js","original":{"line":19,"column":46},"generated":{"line":1,"column":197}},{"source":"components/ttl.js","name":"tick","original":{"line":19,"column":51},"generated":{"line":1,"column":202}},{"source":"components/ttl.js","original":{"line":19,"column":57},"generated":{"line":1,"column":207}},{"source":"components/ttl.js","original":{"line":19,"column":63},"generated":{"line":1,"column":211}},{"source":"components/ttl.js","name":"update","original":{"line":21,"column":4},"generated":{"line":1,"column":218}},{"source":"components/ttl.js","original":{"line":21,"column":12},"generated":{"line":1,"column":225}},{"source":"components/ttl.js","name":"oldData","original":{"line":21,"column":21},"generated":{"line":1,"column":234}},{"source":"components/ttl.js","name":"oldData","original":{"line":22,"column":12},"generated":{"line":1,"column":237}},{"source":"components/ttl.js","name":"oldData","original":{"line":22,"column":12},"generated":{"line":1,"column":240}},{"source":"components/ttl.js","name":"seconds","original":{"line":22,"column":20},"generated":{"line":1,"column":242}},{"source":"components/ttl.js","original":{"line":22,"column":32},"generated":{"line":1,"column":252}},{"source":"components/ttl.js","name":"data","original":{"line":22,"column":37},"generated":{"line":1,"column":257}},{"source":"components/ttl.js","name":"expireAt","original":{"line":22,"column":42},"generated":{"line":1,"column":262}},{"source":"components/ttl.js","original":{"line":22,"column":52},"generated":{"line":1,"column":271}},{"source":"components/ttl.js","name":"now","original":{"line":23,"column":18},"generated":{"line":1,"column":272}},{"source":"components/ttl.js","name":"now","original":{"line":23,"column":18},"generated":{"line":1,"column":278}},{"source":"components/ttl.js","original":{"line":23,"column":24},"generated":{"line":1,"column":280}},{"source":"components/ttl.js","name":"Date","original":{"line":23,"column":28},"generated":{"line":1,"column":284}},{"source":"components/ttl.js","name":"now","original":{"line":24,"column":12},"generated":{"line":1,"column":289}},{"source":"components/ttl.js","name":"setSeconds","original":{"line":24,"column":16},"generated":{"line":1,"column":291}},{"source":"components/ttl.js","name":"now","original":{"line":24,"column":27},"generated":{"line":1,"column":302}},{"source":"components/ttl.js","name":"getSeconds","original":{"line":24,"column":31},"generated":{"line":1,"column":304}},{"source":"components/ttl.js","original":{"line":24,"column":46},"generated":{"line":1,"column":317}},{"source":"components/ttl.js","name":"data","original":{"line":24,"column":51},"generated":{"line":1,"column":322}},{"source":"components/ttl.js","name":"seconds","original":{"line":24,"column":56},"generated":{"line":1,"column":327}},{"source":"components/ttl.js","name":"expireAt","original":{"line":25,"column":17},"generated":{"line":1,"column":336}},{"source":"components/ttl.js","name":"expireAt","original":{"line":25,"column":17},"generated":{"line":1,"column":341}},{"source":"components/ttl.js","name":"now","original":{"line":25,"column":28},"generated":{"line":1,"column":350}},{"source":"components/ttl.js","name":"tick","original":{"line":28,"column":4},"generated":{"line":1,"column":354}},{"source":"components/ttl.js","original":{"line":28,"column":10},"generated":{"line":1,"column":359}},{"source":"components/ttl.js","original":{"line":29,"column":20},"generated":{"line":1,"column":370}},{"source":"components/ttl.js","name":"Date","original":{"line":29,"column":24},"generated":{"line":1,"column":374}},{"source":"components/ttl.js","original":{"line":30,"column":18},"generated":{"line":1,"column":379}},{"source":"components/ttl.js","name":"expireAt","original":{"line":30,"column":23},"generated":{"line":1,"column":384}},{"source":"components/ttl.js","name":"el","original":{"line":31,"column":17},"generated":{"line":1,"column":394}},{"source":"components/ttl.js","name":"el","original":{"line":31,"column":17},"generated":{"line":1,"column":399}},{"source":"components/ttl.js","name":"parentNode","original":{"line":31,"column":20},"generated":{"line":1,"column":402}},{"source":"components/ttl.js","name":"removeChild","original":{"line":31,"column":31},"generated":{"line":1,"column":413}},{"source":"components/ttl.js","original":{"line":31,"column":43},"generated":{"line":1,"column":425}},{"source":"components/ttl.js","name":"el","original":{"line":31,"column":48},"generated":{"line":1,"column":430}}],"sources":{"components/ttl.js":"/* global AFRAME */\n\n/**\n * TTL component.\n *\n * When applied to an entity, the entity will remove itself from DOM after the specified number of seconds.\n * Update *is* allowed, which will reset the timer to start from that moment.\n *\n * @member {object} expireAt - Expiration time Date object\n */\nAFRAME.registerComponent('ttl', {\n    schema: {\n        seconds: {type: 'number'},\n    },\n    init: function() {\n        const now = new Date();\n        now.setSeconds(now.getSeconds() + this.data.seconds);\n        this.expireAt = now;\n        this.tick = AFRAME.utils.throttleTick(this.tick, 1000, this);\n    },\n    update: function(oldData) {\n        if (oldData.seconds !== this.data.expireAt) {\n            const now = new Date();\n            now.setSeconds(now.getSeconds() + this.data.seconds);\n            this.expireAt = now;\n        }\n    },\n    tick: function() {\n        const now = new Date();\n        if (now > this.expireAt) {\n            this.el.parentNode.removeChild(this.el);\n        }\n    },\n});\n"},"lineCount":null}},"error":null,"hash":"6f27047064472f3cdfef9ee7b1a901ed","cacheData":{"env":{}}}
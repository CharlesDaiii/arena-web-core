<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">

    <link rel="icon" type="image/png" href="images/conix-x.png">

    <title>ARENA</title>
    <meta name="description" content="Augmented Reality Edge Networking Architecture">

    <!-- jquery, needed by lib jitsi -->
    <script src="vendor/jquery-2.1.1.min.js"></script>

    <!-- lib jitsi -->
    <script src="src/vendor/lib-jitsi-meet.min.js"></script>

    <!-- our default configs -->
    <script src="conf/defaults.js"></script>

    <!-- main arena bundle -->
    <script src="dist/index.js"></script>

    <!-- face tracking -->
    <script src="src/face-tracking/dist/arena-face-tracker.min.js"></script>
    <script src="src/face-tracking/script.js"></script>

    <!-- webxr viewer handler -->
    <script src="src/web-xr-viewer.js"></script>

    <!-- import stylesheets -->
    <link rel="stylesheet" href="src/icons/icons.css">
    <link rel="stylesheet" href="src/chat/style.css">
  </head>
  <body>
  <a-scene background="color: black" name="MQTTScene" webxr="optionalFeatures: hit-test, dom-overlay, computerVision; overlayElement: overlay;">  <!-- stats physics -->
      <a-assets>
        <!-- Vive controller 3d model -->
        <a-asset-item id="viveControl-obj" src="models/vr_controller_vive.obj"></a-asset-item>
        <a-asset-item id="viveControl-mtl" src="models/vr_controller_vive.mtl"></a-asset-item>
      </a-assets>

      <a-entity id="sceneRoot">
        <!-- ground plane so falling objects don't fall through floor -->
        <a-plane static-body position="0 -0.1 0" id="groundPlane" collision-listener color="#FFAAEE" transparent="true" opacity=".01" height="30" width="30" rotation="-90 0 0"></a-plane>

        <!-- walls so rolling objects don't roll off edge -->
        <a-box static-body position="-15 1 0" id="border1" color="#111111" transparent="true" opacity=".01" scale="0.5 0.5 30"></a-box>
        <a-box static-body position="15 1 0" id="border2" color="#111111" transparent="true" opacity=".01" scale="0.5 0.5 30"></a-box>
        <a-box static-body position="0 1 15" id="border3" color="#111111" transparent="true" opacity=".01" scale="30 0.5 0.5"></a-box>
        <a-box static-body position="0 1 -15" id="border4" color="#111111" transparent="true" opacity=".01" scale="30 0.5 0.5"></a-box>

        <a-entity position="0 0 0" id="CameraRig">
          <a-entity position="0 0 0" id="CameraSpinner" name="PerspectiveCamera" tag="MainCamera">
            <!-- this camera can 'fly': z axis follows pitch of head direction -->
            <a-camera id="my-camera" far="10000" near="0.1" wasd-controls="fly: false; acceleration: 30" look-controls="reverseMouseDrag: true" look-controls-arrow mouse-cursor press-and-move network-latency>
              <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects:[click-listener]"></a-entity>
            </a-camera>
          </a-entity>
        </a-entity>

        <a-entity vive-listener vive-pose-listener id="vive-leftHand" laser-controls="hand:left" raycaster="objects: [click-listener]"></a-entity>
        <a-entity vive-listener vive-pose-listener id="vive-rightHand" laser-controls="hand:right" raycaster="objects: [click-listener]"></a-entity>
      </a-entity>
    </a-scene>

    <video src="" id="localVideo" muted="muted" volume="0" autoplay="true" playsinline="true" crossorigin="anonymous"></video>

    <div id="gltf-loading"></div>

    <!-- login auth check with calls to mqtt connect placed in an `onauth` event listener -->
<!--    <script src="https://apis.google.com/js/platform.js"></script> -->
    <script src="vendor/jsrsasign-all-min.js" type="text/javascript"></script>
    <script src="src/auth.js"></script>
    <script type="text/javascript">authCheck({ signInPath: "./signin" });</script>
  </body>
</html>

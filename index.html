<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" type="image/png" href="//xr.andrew.cmu.edu/conix-x.png">
    <meta charset="utf-8">
    <title>ARENA Videoconf</title>
    <meta name="description" content="VN3dV">
    <!-- the AFrame script library -->
    <script src="aframe/dist/aframe-master.js"></script>

    <!-- multisrc component: multiple texture sides for e.g. dice -->
    <script src="vendor/aframe-multisrc-component.js"></script>

    <!-- from https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.js -->
    <script src="vendor/aframe-physics-system.js"></script>
    <script src="vendor/aframe-meshline-component.min.js"></script>

    <!-- pretty backgrounds -->
    <script src="vendor/aframe-environment-component.min.js"></script>

    <!-- transparent occlude -->
    <script src="libs/transparent-occlude.js"></script>

    <!-- gltf animations -->
    <script src="https://rawcdn.githack.com/elbobo/aframe-gltf-morph-component/07e9b80bd382cc1c19223468d35c453e7c76e9a2/dist/aframe-gltf-morph-component.js"></script>

    <!-- icons -->
    <link rel="stylesheet" href="icons.css">
    <script src="icons.js"></script>

    <!-- our camera change and other event listener Components -->
    <script src="events.js"></script>
    <!-- V3.1 of the Paho MQTT.js library -->
    <script src="vendor/mqttws31.js" type="text/javascript"></script>
    <!-- our mqtt.js (main) script -->
    <script src="mqtt.js" type="text/javascript"></script>
    <!-- particles dude
    <script src="vendor/aframe-particle-system-component.min.js"></script>
    -->
    <script src="libs/jquery-2.1.1.min.js"></script>
    <script src="libs/strophe/strophe.js"></script>
    <script src="libs/strophe/strophe.disco.min.js?v=1"></script>
    <!-- below copied into libs/ from top level lib-jitsi-meet repo      -->
    <script src="libs/lib-jitsi-meet.min.js"></script>
<!--
    <script src="https://meet.jit.si/libs/lib-jitsi-meet.min.js"></script>
-->
    <script src="jitsi-arena.js" ></script>

  </head>

  <!--<body onload="appInit()">
      maybe we should put something inside <body>???
    -->
  <body>
  <!--    <a-scene name="MQTTScene" apriltag-publish arjs='sourceType: webcam; trackingMethod: apriltag'> -->
  <a-scene name="MQTTScene" background="color: black" iconsinit>
    <!--    <a-scene name="MQTTScene" background="color: "black" >  stats physics -->

    <a-assets>
      <a-asset-item id="Cube-obj" src="models/Cube.obj"></a-asset-item>
      <a-asset-item id="Cube-mtl" src="models/Cube.mtl"></a-asset-item>

      <!-- Vive controller 3d model -->
      <a-asset-item id="viveControl-obj" src="models/vr_controller_vive.obj"></a-asset-item>
      <a-asset-item id="viveControl-mtl" src="models/vr_controller_vive.mtl"></a-asset-item>

      <video src="" id="localvidbox" muted="muted" volume="0"  autoplay="true" playsinline="true" crossorigin="anonymous"></video>
    <!--
      <video src="" id="box0"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box1"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box2"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box3"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box4"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box5"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box6"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box7"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box8"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box9"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box10"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
      <video src="" id="box11"   autoplay="true" playsinline="true" crossorigin="anonymous"></video>
    -->
    </a-assets>

    <a-entity id="sceneRoot"></a-entity>
    <!-- ground plane -->
    <a-plane static-body position="0 -0.1 0" id="groundPlane" color="#FFAAEE" transparent="true" opacity="0.01" height="30" width="30" rotation="-90 0 0"></a-plane>

    <!--  <a-sky radius="5000" color="#000000"></a-sky> -->

    <a-entity id="env" environment="preset: starry; fog: 0; groundTexture: 'none';"></a-entity>

    <!--<a-entity position="0 2.25 -4" id="weather" particle-system="preset: dust" enabled="true"></a-entity>  -->

	<a-entity position="0 0 0" id="CameraRig">
	  <a-entity position="0 0 0" id="CameraSpinner" name="PerspectiveCamera" tag="MainCamera">
	    <!-- this camera can 'fly': z axis follows pitch of head direction -->
	    <a-camera id="my-camera" far="10000" near="0.1" wasd-controls="fly: true; acceleration: 30" look-controls pose-listener mouse-cursor touch-controls>
	      <!--
		  <a-camera id="my-camera" far="10000" near="0.1" look-controls-enabled="true" wasd-controls-enabled="true" pose-listener mouse-cursor>
		    <a-cursor fuse="true" max-distance="1000" timeout="1500"></a-cursor>
		    -->
	      <a-entity id="mouseCursor" cursor="rayOrigin: mouse" raycaster="objects:[click-listener]"></a-entity>
	    </a-camera>
	  </a-entity>
	</a-entity>
    <!-- commented out vive-listener component in below -->
    <a-entity vive-listener vive-pose-listener id="vive-leftHand" laser-controls="hand:left" raycaster="objects: [click-listener]"></a-entity>
    <a-entity vive-listener vive-pose-listener id="vive-rightHand" laser-controls="hand:right" raycaster="objects: [click-listener]"></a-entity>

    <!-- a Vive controller
	 <a-entity id="viveController" visible="false" position="0 1 -2" obj-model="obj: #viveControl-obj; mtl: #viveControl-mtl"></a-entity>
	 -->

    <!-- let there be LIGHTS -->
    <a-light position="-0.93 1.58 -1.14" name="PointLight 1" type="point" color="#9090AD" intensity="0.75"></a-light>
    <a-light position="-0.272 0.39 1.25" name="PointLight 2" type="point" color="#C2E6C7"></a-light>
    <a-light name="AmbientLight" type="ambient" color="#363942"></a-light>
    <!--
	<a-entity light="type: ambient; color: #BBB"></a-entity>
	<a-entity light="type: directional; color: #FFF; intensity: 0.6" position="-0.5 1 1"></a-entity>
	-->
    <!-- animation="property: rotation; to: 0 360 0; loop:true; dur:10000; -->
<!-- surround 360 panorama
    <a-cylinder id="wallbox0" src="#localvidbox" height=40 radius=10 open-ended="true"  easing:linear" material="shader: flat; side: double; repeat: 1 1; offset: 0 0" position="0  -11 0" class="transit easyrtcMirror" muted="muted" volume="0"  autoplay="true" playsinline="true"></a-cylinder>


    <a-plane id="bigscreen" src="" scale="8 6 0.01" material="shader: flat; side: double"   position="6 3 -4" autoplay="true" playsinline="true" ></a-plane>
    -->

    <a-plane id="localwallbox" visible="false" src="#localvidbox" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="0    4 -4"   autoplay="true" playsinline="true" ></a-plane>
<!--
    <a-plane id="wallbox1" src="#box1" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="-1.5 1 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox2" src="#box2" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="-1.5 2 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox3" src="#box3" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="-1.5 3 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox4" src="#box4" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="-0.5 1 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox5" src="#box5" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="-0.5 2 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox6" src="#box6" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="-0.5 3 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox7" src="#box7" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="0.5  1 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox8" src="#box8" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="0.5  2 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox9" src="#box9" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="0.5  3 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox10" src="#box10" scale="0.96 0.72 0.01" material="shader: flat; side: double" position="1.5  1 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox11" src="#box11" scale="0.96 0.72 0.01" material="shader: flat; side: double" position="1.5  2 -4"   autoplay="true" playsinline="true" ></a-plane>
    <a-plane id="wallbox0" src="#box0" scale="0.96 0.72 0.01" material="shader: flat; side: double"   position="1.5 3 -4"   autoplay="true" playsinline="true" ></a-plane>
-->
  </a-scene>
  <div id="iconsDiv"></div>
</body>
</html>
